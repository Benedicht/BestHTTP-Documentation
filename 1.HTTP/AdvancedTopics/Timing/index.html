<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Tivadar GyÃ¶rgy Nagy">
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Timing API - Best HTTP/2 Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Timing API";
    var mkdocs_page_input_path = "1.HTTP\\AdvancedTopics\\Timing.md";
    var mkdocs_page_url = "/5sb/1.HTTP/AdvancedTopics/Timing/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Best HTTP/2 Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../ThirdPartyNotices/">Third-Party Notices</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../UpgradeGuide/">UpgradeGuide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../changelog/">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../platforms/">Platforms</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">1.HTTP</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../GettingStarted/">Getting Started Quickly</a>
                </li>
                <li class="">
                    
    <a class="" href="../../HTTPRequest/">HTTPRequest</a>
                </li>
                <li class="">
                    
    <a class="" href="../../HTTPResponse/">HTTPResponse</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">AdvancedTopics</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../Async-await/">Async-Await with HTTPRequest</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../Authentication/">Authentication</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../Caching/">Caching</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../Cookies/">Cookies</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../DownloadProgress/">Download Progress Tracking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../DownloadStreaming/">Download Streaming</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../ErrorHandling/">ErrorHandling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../Redirections/">Control Redirections</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../Request.Abort/">Aborting a Request</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../RequestStates/">Request States</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../ServerCertificateValidation/">Server Certificate Validation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../SmallCode-Samples/">Small Code-Samples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../Timeouts/">Timeouts</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Timing API</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#timing-api">Timing API</a></li>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../UploadProgress/">Upload Progress Tracking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../UploadStreaming/">Upload Streaming</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">2.WebSocket</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../2.WebSocket/">Index</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">3.1Socket.IO3</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../3.1Socket.IO3/">Socket.IO 3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">3.Socket.IO</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/">SocketIO</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/1.Namespaces/">Connecting to namespaces</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/2.ReceivingEvents/">Subscribing and receiving events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/3.SendingEvents/">Sending events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/4.DefaultEncoder/">Set the default Json encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/5.CustomEncoder/">Writing a custom Json encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/6.AutoDecodePayload/">AutoDecodePayload</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/7.ErrorHandling/">Error handling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../3.Socket.IO/8.Options/">The SocketOptions class</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">4.SignalR</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../4.SignalR/">Index</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../4.SignalR/1.Connection/">The Connection class</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../4.SignalR/2.GeneralEvents/">Handling general events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../4.SignalR/3.Sending/">Sending non-Hub messages</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../4.SignalR/4.Hubs/">Hubs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">5.EventSource</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../5.EventSource/">Server-Sent Events (EventSource)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">6.SignalRCore</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../6.SignalRCore/">SignalR Core</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../6.SignalRCore/1.HubConnection/">The HubConnection Class</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../6.SignalRCore/2.Authentication/">The IAuthenticationProvider interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../6.SignalRCore/3.Encoders/">Encoders</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../6.SignalRCore/4.IRetryPolicy/">Automatic reconnection and the IRetryPolicy interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../6.SignalRCore/5.AzureSignalRService/">How to connect to an Azure SignalR Service</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">7.GlobalTopics</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/BufferPool/">Buffer Pool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/ConnectionPool/">Connection Pooling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/GlobalSettings/">Global Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/HTTP2/">HTTP/2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/HTTPS/">HTTPS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/HowToDisableFeatures/">How to disable features</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/Logging/">Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/Proxy/">Proxies</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../7.GlobalTopics/ThreadSafety/">ThreadSafety</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">8.Addons</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">TLSSecurity</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../8.Addons/TLSSecurity/">About</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../8.Addons/TLSSecurity/CertificationManagerWindow/">CertificationManagerWindow</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../8.Addons/TLSSecurity/Options/">SecurityOptions</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">cURLParser</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../8.Addons/cURLParser/">Index</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Best HTTP/2 Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>AdvancedTopics &raquo;</li>
        
      
        
          <li>1.HTTP &raquo;</li>
        
      
    
    <li>Timing API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="timing-api">Timing API</h1>
<p>A <code>HTTPRequest</code> tracks timings of various phases. These phases could be the following(<a href="https://developers.google.com/web/tools/chrome-devtools/network/reference?#timing-explanation">naming and meaning similiar to the one can be found in the Chrome DevTools</a>):</p>
<ul>
<li><strong>Queued</strong>: Duration the plugin kept the request in its internal queue. Normally this should be a very low time, but when <a href="../../../7.GlobalTopics/GlobalSettings/">MaxConnectionPerServer</a> or HTTP/2's negotiated <a href="../../../7.GlobalTopics/HTTP2/#settings">MaxConcurrentStreams</a> applies requests could stay in the queue longer.</li>
<li><strong>Queued for redirection</strong>: The same as the previous, but the request already made a round-trip to a server and got redirected.</li>
<li><strong>DNS Lookup</strong>: Duration to resolve the server's IP address. Absent if the request processed on a reused connection.</li>
<li><strong>TCP Connection</strong>: Time required to connect to the server through a new TCP channel. Absent if the request processed on a reused connection.</li>
<li><strong>Proxy Negotiation</strong>: Time took to negotiate with the proxy. Absent if the request processed on a reused connection.</li>
<li><strong>TLS Negotiation</strong>: Duration of the TLS negotiation. Absent if the request processed on a reused connection.</li>
<li><strong>Request Sent</strong>: Time required to write all bytes of the request (headers + payload) to the network.</li>
<li><strong>Waiting (TTFB)</strong>: Time the plugin had to wait for the first byte of the server's response.</li>
<li><strong>Headers</strong>: Time required to read all headers.</li>
<li><strong>Response Received</strong>: Time required to read all bytes of the response's payload.</li>
<li><strong>Loading from Cache</strong>: Time required to read all bytes from a previously cached response. Absent for non-cached contents.</li>
<li><strong>Writing to Cache</strong>: Time took to cache the response. Absent for non-cachable contents.</li>
<li><strong>Queued for Dispatch</strong>: Time between the request is finished and its callback is called. Just like the Queued timings, the request shouldn't stay too much in this queue either. However, because callbacks are called from a MonoBehavior's Upate function, frequency of the Update calls greatly affects these numbers.</li>
<li><strong>Finished in</strong>: Duration from start to finish.</li>
</ul>
<p>As noted, not all phases are present for all requests, but it's also true that new entries are addded for every redirection.</p>
<p>For example a request timing can look like this when it's a first request (no connection is reused):</p>
<blockquote>
<p>[TimingCollector Start: '12:42:56' </br>['Queued': 00:00:00.0030003]</br>['DNS Lookup': 00:00:00.0050012]</br>['TCP Connection': 00:00:00.0040004]</br>['Proxy Negotiation': 00:00:00.3006451]</br>['TLS Negotiation': 00:00:00.4023915]</br>['Queued': 00:00:00.0072776]</br>['Request Sent': 00:00:00.0139910]</br>['Waiting (TTFB)': 00:00:00.1346626]</br>['Headers': 00:00:00.0060009]</br>['Response Received': 00:00:00.0019991]</br>['Queued for Dispatch': 00:00:00.0020012]</br>['Finished in': 00:00:00.8809709]]</p>
</blockquote>
<p>The code that produced this log entry:</p>
<pre><code class="language-csharp">IEnumerator DoTiming()
{
    var request = new HTTPRequest(new Uri(&quot;https://httpbin.org/get&quot;));
    yield return request.Send();

    Debug.Log(request.Timing.ToString());
}
</code></pre>

<p>As can be seen the three largest entries are <em>Proxy Negotiation</em>, <em>TLS Negotiation</em> and <em>Waiting (TTFB)</em>.</p>
<p>But, when a reques can be sent through an already open connection or using HTTP/2, running the code above can produce an entry like this:</p>
<blockquote>
<p>[TimingCollector Start: '12:49:48' </br>['Queued': 00:00:00]</br>['Request Sent': 00:00:00.0010005]</br>['Waiting (TTFB)': 00:00:00.1308247]</br>['Headers': 00:00:00]</br>['Response Received': 00:00:00]</br>['Queued for Dispatch': 00:00:00]</br>['Finished in': 00:00:00.1318252]]</p>
</blockquote>
<p>Most of the time spent for waiting for the server's response.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Timing uses <code>DateTime.Now</code> to calculate time spent between the phases, accuracy depends on this call. It can be used to get a better view on where the plugin had to wait or spend time and <strong>not</strong> for benchmarking!</p>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../UploadProgress/" class="btn btn-neutral float-right" title="Upload Progress Tracking">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Timeouts/" class="btn btn-neutral" title="Timeouts"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Timeouts/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../UploadProgress/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>

</body>
</html>
