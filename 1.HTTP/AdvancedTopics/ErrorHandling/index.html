<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Tivadar GyÃ¶rgy Nagy">
    <link rel="canonical" href="http://u3d.as/5sb/1.HTTP/AdvancedTopics/ErrorHandling/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>ErrorHandling - Best HTTP/2 Documentation</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
	<link rel="stylesheet" href="../../../css/prism.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
	<script src="../../../js/prism.js"></script>
	
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Error handling", url: "#_top", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body class="line-numbers match-braces" >
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Redirections/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Redirections/" class="btn btn-xs btn-link">
        Control Redirections
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../DownloadStreaming/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../DownloadStreaming/" class="btn btn-xs btn-link">
        Download Streaming
      </a>
    </div>
    
  </div>

    

    <h2 id="error-handling">Error handling</h2>
<p>Because the callbacks' <code>HTTPResponse</code> parameter can be null in cases where there was an error on client side (request aborting, timeouts or non-reachable server), as a best practice a <code>HTTPRequest</code>'s callback should look like this:</p>
<pre><code class="language-csharp">private void OnRequestFinished(HTTPRequest req, HTTPResponse resp)
{
    switch (req.State)
    {
        // The request finished without any problem.
        case HTTPRequestStates.Finished:
            if (resp.IsSuccess)
            {
                // Everything went as expected!
            }
            else
            {
                Debug.LogWarning(string.Format(&quot;Request finished Successfully, but the server sent an error. Status Code: {0}-{1} Message: {2}&quot;,
                                                resp.StatusCode,
                                                resp.Message,
                                                resp.DataAsText));
            }
            break;

        // The request finished with an unexpected error. The request's Exception property may contain more info about the error.
        case HTTPRequestStates.Error:
            Debug.LogError(&quot;Request Finished with Error! &quot; + (req.Exception != null ? (req.Exception.Message + &quot;\n&quot; + req.Exception.StackTrace) : &quot;No Exception&quot;));
            break;

        // The request aborted, initiated by the user.
        case HTTPRequestStates.Aborted:
            Debug.LogWarning(&quot;Request Aborted!&quot;);
            break;

        // Connecting to the server is timed out.
        case HTTPRequestStates.ConnectionTimedOut:
            Debug.LogError(&quot;Connection Timed Out!&quot;);
            break;

        // The request didn't finished in the given time.
        case HTTPRequestStates.TimedOut:
            Debug.LogError(&quot;Processing the request Timed Out!&quot;);
            break;
    }
}
</code></pre>

<p>A request may fail even before reaching the server so it's wise to check its <code>State</code> first. 
But even if the request reach the server it can fail if the request is badly constructed or incomplete (status code of 4xxx), or because the server had an issue (status code of 5xxx). So in the <code>Finshed</code> case we still have to check the <code>HTTPResponse</code>'s StatusCode for those codes, or just simple test against the <code>IsSuccess</code> property. IsSuccess is just a shortened way to check whether the status code is in a valid range:</p>
<pre><code class="language-csharp">public bool IsSuccess { get { return (this.StatusCode &gt;= 200 &amp;&amp; this.StatusCode &lt; 300) || this.StatusCode == 304; } }
</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Redirections/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Redirections/" class="btn btn-xs btn-link">
        Control Redirections
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../DownloadStreaming/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../DownloadStreaming/" class="btn btn-xs btn-link">
        Download Streaming
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>