<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Tivadar GyÃ¶rgy Nagy">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>HTTP/2 - Best HTTP/2 Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "HTTP/2";
    var mkdocs_page_input_path = "7.GlobalTopics\\HTTP2.md";
    var mkdocs_page_url = "/5sb/7.GlobalTopics/HTTP2/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Best HTTP/2 Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../ThirdPartyNotices/">Third-Party Notices</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../UpgradeGuide/">UpgradeGuide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../changelog/">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../platforms/">Platforms</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">1.HTTP</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../1.HTTP/GettingStarted/">Getting Started Quickly</a>
                </li>
                <li class="">
                    
    <a class="" href="../../1.HTTP/HTTPRequest/">HTTPRequest</a>
                </li>
                <li class="">
                    
    <a class="" href="../../1.HTTP/HTTPResponse/">HTTPResponse</a>
                </li>
                <li class="">
                    
    <span class="caption-text">AdvancedTopics</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Async-await/">Async-Await with HTTPRequest</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Authentication/">Authentication</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Caching/">Caching</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Cookies/">Cookies</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/DownloadProgress/">Download Progress Tracking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/DownloadStreaming/">Download Streaming</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/ErrorHandling/">ErrorHandling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Redirections/">Control Redirections</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Request.Abort/">Aborting a Request</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/RequestStates/">Request States</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/ServerCertificateValidation/">Server Certificate Validation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/SmallCode-Samples/">Small Code-Samples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Timeouts/">Timeouts</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Timing/">Timing API</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/UploadProgress/">Upload Progress Tracking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/UploadStreaming/">Upload Streaming</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">2.WebSocket</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../2.WebSocket/">Index</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">3.1Socket.IO3</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../3.1Socket.IO3/">Socket.IO 3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">3.Socket.IO</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/">SocketIO</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/1.Namespaces/">Connecting to namespaces</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/2.ReceivingEvents/">Subscribing and receiving events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/3.SendingEvents/">Sending events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/4.DefaultEncoder/">Set the default Json encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/5.CustomEncoder/">Writing a custom Json encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/6.AutoDecodePayload/">AutoDecodePayload</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/7.ErrorHandling/">Error handling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/8.Options/">The SocketOptions class</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">4.SignalR</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../4.SignalR/">Index</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/1.Connection/">The Connection class</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/2.GeneralEvents/">Handling general events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/3.Sending/">Sending non-Hub messages</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/4.Hubs/">Hubs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">5.EventSource</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../5.EventSource/">Server-Sent Events (EventSource)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">6.SignalRCore</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../6.SignalRCore/">SignalR Core</a>
                </li>
                <li class="">
                    
    <a class="" href="../../6.SignalRCore/1.HubConnection/">The HubConnection Class</a>
                </li>
                <li class="">
                    
    <a class="" href="../../6.SignalRCore/2.Authentication/">The IAuthenticationProvider interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../6.SignalRCore/3.Encoders/">Encoders</a>
                </li>
                <li class="">
                    
    <a class="" href="../../6.SignalRCore/4.IRetryPolicy/">Automatic reconnection and the IRetryPolicy interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../6.SignalRCore/5.AzureSignalRService/">How to connect to an Azure SignalR Service</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">7.GlobalTopics</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../BufferPool/">Buffer Pool</a>
                </li>
                <li class="">
                    
    <a class="" href="../ConnectionPool/">Connection Pooling</a>
                </li>
                <li class="">
                    
    <a class="" href="../GlobalSettings/">Global Settings</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">HTTP/2</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#http2">HTTP/2</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#how-it-works">How it works</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#settings">Settings</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#maxconcurrentstreams">MaxConcurrentStreams</a></li>
        
            <li><a class="toctree-l4" href="#initialstreamwindowsize">InitialStreamWindowSize</a></li>
        
            <li><a class="toctree-l4" href="#initialconnectionwindowsize">InitialConnectionWindowSize</a></li>
        
            <li><a class="toctree-l4" href="#maxframesize">MaxFrameSize</a></li>
        
            <li><a class="toctree-l4" href="#maxidletime">MaxIdleTime</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#websocket-over-http2-settings">WebSocket Over HTTP/2 Settings</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#enablewebsocketoverhttp2">EnableWebSocketOverHTTP2</a></li>
        
            <li><a class="toctree-l4" href="#enableimplementationfallback">EnableImplementationFallback</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../HTTPS/">HTTPS</a>
                </li>
                <li class="">
                    
    <a class="" href="../HowToDisableFeatures/">How to disable features</a>
                </li>
                <li class="">
                    
    <a class="" href="../Logging/">Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../Proxy/">Proxies</a>
                </li>
                <li class="">
                    
    <a class="" href="../ThreadSafety/">ThreadSafety</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">8.Addons</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">TLSSecurity</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/TLSSecurity/">About</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/TLSSecurity/CertificationManagerWindow/">CertificationManagerWindow</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/TLSSecurity/Options/">SecurityOptions</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">cURLParser</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/cURLParser/">Index</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Best HTTP/2 Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>7.GlobalTopics &raquo;</li>
        
      
    
    <li>HTTP/2</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="http2">HTTP/2</h1>
<h2 id="how-it-works">How it works</h2>
<p>BestHTTP implements HTTP/2 over TLS. Using the TLS negotiation and its ALPN extension the plugin let the server know that it's ready to upgrade to the HTTP/2 protocol. 
If the server has support for HTTP/2 and sends back the proper answer the plugin upgrades the connection and will communicate with the server using the HTTP/2 protocol. Using the TLS' ALPN extension upgrading to HTTP/2 is faster.</p>
<p>However, when multiple requests are made to the same server and the plugin don't know whether the server capable to upgrade to HTTP/2, it will create only one connection to test against http/2. If the server reports no HTTP/2/2 support, the plugin will open new connections depending on the value of <code>HTTPManager.MaxConnectionPerServer</code>. if the server supports HTTP/2, the plugin will use that connection only.
This mechanism prevents the plugin to open multiple connections that will be used only for one request. The plugin also stores what servers are supporting HTTP/2, so next time it can decide whether it should open multiple connections or not.</p>
<p>Using HTTP/2 is seemless and requires no prior knowledge whether any target servers has support for it or not. The plugin hides differencies HTTP1.1 and HTTP/2 from the user, but will take advantage of the new protocol every time it has a chance.</p>
<div class="admonition notice">
<p class="admonition-title">Notice</p>
<p>With HTTP/2 the <code>HTTPRequest</code>'s <code>IsKeepAlive</code> setting is ignored.</p>
</div>
<h1 id="settings">Settings</h1>
<p>As most of the global settings, HTTP/2 settings can be accessed through the <code>HTTPManager</code> class:</p>
<pre><code class="language-csharp">using BestHTTP;

HTTPManager.HTTP2Settings.InitialStreamWindowSize = 5 * 1024 * 1024;
</code></pre>

<h2 id="maxconcurrentstreams">MaxConcurrentStreams</h2>
<p>Maximum concurrent http2 stream on http2 connection will allow. Its default value is 128;</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.MaxConcurrentStreams = 256;
</code></pre>

<h2 id="initialstreamwindowsize">InitialStreamWindowSize</h2>
<p>Initial window size of a http2 stream. Its default value is 10 MiB (10 * 1024 * 1024).</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.InitialStreamWindowSize = 1 * 1024 * 1024;
</code></pre>

<h2 id="initialconnectionwindowsize">InitialConnectionWindowSize</h2>
<p>Global window size of a http/2 connection. Its default value is the maximum possible value on 31 bits.</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.InitialConnectionWindowSize = HTTPManager.HTTP2Settings.MaxConcurrentStreams * 1024 * 1024;
</code></pre>

<h2 id="maxframesize">MaxFrameSize</h2>
<p>Maximum payload size of a http2 frame. Its default value is 16384. It must be between 16_384 and 16_777_215.</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.MaxFrameSize = 1 * 1024 * 1024;
</code></pre>

<h2 id="maxidletime">MaxIdleTime</h2>
<p>With HTTP/2 only one connection will be open so we can can keep it open longer as we hope it will be resued more. Its default value is 120 seconds.</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.MaxIdleTime = TimeSpan.FromSeconds(30);
</code></pre>

<h1 id="websocket-over-http2-settings">WebSocket Over HTTP/2 Settings</h1>
<p>Through these options the WebSocket Over HTTP/2 implementation can be customized.</p>
<h2 id="enablewebsocketoverhttp2">EnableWebSocketOverHTTP2</h2>
<p>Set it to false to disable Websocket Over HTTP/2 (RFC 8441). It's true by default.</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.WebSocketOverHTTP2Settings.EnableWebSocketOverHTTP2 = false;
</code></pre>

<h2 id="enableimplementationfallback">EnableImplementationFallback</h2>
<p>Set it to disable fallback logic from the Websocket Over HTTP/2 implementation to the 'old' HTTP/1 implementation when it fails to connect.</p>
<pre><code class="language-csharp">HTTPManager.HTTP2Settings.WebSocketOverHTTP2Settings.EnableImplementationFallback = false;
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../HTTPS/" class="btn btn-neutral float-right" title="HTTPS">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../GlobalSettings/" class="btn btn-neutral" title="Global Settings"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../GlobalSettings/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../HTTPS/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>

</body>
</html>
