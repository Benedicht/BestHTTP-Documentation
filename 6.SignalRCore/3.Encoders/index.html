<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Tivadar GyÃ¶rgy Nagy">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Encoders - Best HTTP/2 Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Encoders";
    var mkdocs_page_input_path = "6.SignalRCore\\3.Encoders.md";
    var mkdocs_page_url = "/5sb/6.SignalRCore/3.Encoders/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Best HTTP/2 Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../ThirdPartyNotices/">Third-Party Notices</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../UpgradeGuide/">UpgradeGuide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../changelog/">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../platforms/">Platforms</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">1.HTTP</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../1.HTTP/GettingStarted/">Getting Started Quickly</a>
                </li>
                <li class="">
                    
    <a class="" href="../../1.HTTP/HTTPRequest/">HTTPRequest</a>
                </li>
                <li class="">
                    
    <a class="" href="../../1.HTTP/HTTPResponse/">HTTPResponse</a>
                </li>
                <li class="">
                    
    <span class="caption-text">AdvancedTopics</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Async-await/">Async-Await with HTTPRequest</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Authentication/">Authentication</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Caching/">Caching</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Cookies/">Cookies</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/DownloadProgress/">Download Progress Tracking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/DownloadStreaming/">Download Streaming</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/ErrorHandling/">ErrorHandling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Redirections/">Control Redirections</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Request.Abort/">Aborting a Request</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/RequestStates/">Request States</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/ServerCertificateValidation/">Server Certificate Validation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/SmallCode-Samples/">Small Code-Samples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Timeouts/">Timeouts</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/Timing/">Timing API</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/UploadProgress/">Upload Progress Tracking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../1.HTTP/AdvancedTopics/UploadStreaming/">Upload Streaming</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">2.WebSocket</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../2.WebSocket/">Index</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">3.1Socket.IO3</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../3.1Socket.IO3/">Socket.IO 3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">3.Socket.IO</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/">SocketIO</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/1.Namespaces/">Connecting to namespaces</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/2.ReceivingEvents/">Subscribing and receiving events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/3.SendingEvents/">Sending events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/4.DefaultEncoder/">Set the default Json encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/5.CustomEncoder/">Writing a custom Json encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/6.AutoDecodePayload/">AutoDecodePayload</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/7.ErrorHandling/">Error handling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../3.Socket.IO/8.Options/">The SocketOptions class</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">4.SignalR</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../4.SignalR/">Index</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/1.Connection/">The Connection class</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/2.GeneralEvents/">Handling general events</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/3.Sending/">Sending non-Hub messages</a>
                </li>
                <li class="">
                    
    <a class="" href="../../4.SignalR/4.Hubs/">Hubs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">5.EventSource</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../5.EventSource/">Server-Sent Events (EventSource)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">6.SignalRCore</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">SignalR Core</a>
                </li>
                <li class="">
                    
    <a class="" href="../1.HubConnection/">The HubConnection Class</a>
                </li>
                <li class="">
                    
    <a class="" href="../2.Authentication/">The IAuthenticationProvider interface</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Encoders</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#encoders">Encoders</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#json">JSon</a></li>
        
            <li><a class="toctree-l4" href="#how-to-enable-and-use-newtonsofts-json-net-for-unity-encoder">How to Enable and Use Newtonsoft's JSON .NET For Unity Encoder</a></li>
        
            <li><a class="toctree-l4" href="#messagepack">MessagePack</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../4.IRetryPolicy/">Automatic reconnection and the IRetryPolicy interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../5.AzureSignalRService/">How to connect to an Azure SignalR Service</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">7.GlobalTopics</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/BufferPool/">Buffer Pool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/ConnectionPool/">Connection Pooling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/GlobalSettings/">Global Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/HTTP2/">HTTP/2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/HTTPS/">HTTPS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/HowToDisableFeatures/">How to disable features</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/Logging/">Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/Proxy/">Proxies</a>
                </li>
                <li class="">
                    
    <a class="" href="../../7.GlobalTopics/ThreadSafety/">ThreadSafety</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">8.Addons</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">TLSSecurity</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/TLSSecurity/">About</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/TLSSecurity/CertificationManagerWindow/">CertificationManagerWindow</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/TLSSecurity/Options/">SecurityOptions</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">cURLParser</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../8.Addons/cURLParser/">Index</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Best HTTP/2 Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>6.SignalRCore &raquo;</li>
        
      
    
    <li>Encoders</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="encoders">Encoders</h1>
<p>SignalR Core can use different encodings to send and receive messages. Current encodings are JSon and MessagePack.
Using these are not automatic, as most of these implementations require 3rd plugins and/or changes to the server.</p>
<div class="admonition warning">
<p class="admonition-title">Advice:</p>
<p>If possible use MessagePack as it's more efficient memory and cpu wise too!</p>
</div>
<h2 id="json">JSon</h2>
<p>For the plugin, the JSon encoder is available without any additional steps. The <code>JsonProtocol</code> class is a generic implementation that can work with different encoders that can use concreate JSON parsers. The one that comes with the plugin is the <code>LitJsonEncoder</code>.</p>
<pre><code class="language-csharp">hub = new HubConnection(new Uri(&quot;https://server/hub&quot;), new JsonProtocol(new LitJsonEncoder()));
</code></pre>

<h2 id="how-to-enable-and-use-newtonsofts-json-net-for-unity-encoder">How to Enable and Use Newtonsoft's JSON .NET For Unity Encoder</h2>
<p>There's an encoder implementation that uses the <a href="https://assetstore.unity.com/packages/tools/input-management/json-net-for-unity-11347?aid=1101lfX8E">Newtonsoft's JSON .NET For Unity</a> package.</p>
<p>Steps to enable it and use it:</p>
<ol>
<li>Download and import the <a href="https://assetstore.unity.com/packages/tools/input-management/json-net-for-unity-11347?aid=1101lfX8E">Newtonsoft's JSON .NET For Unity</a> package</li>
<li>
<p>Add the <strong>BESTHTTP_SIGNALR_CORE_ENABLE_NEWTONSOFT_JSON_DOTNET_ENCODER</strong> define to the <a href="https://docs.unity3d.com/Manual/PlatformDependentCompilation.html">Scripting Define Symbols</a> input under <strong>PlayerSettings/Other Settings</strong>:</p>
<p><img alt="Scrypting Define Symbols" src="../media/JSONDotNet_ScriptingDefineSymbols.png" /></p>
</li>
<li>
<p>Use the now-available <code>JsonDotNetEncoder</code> class:</p>
</li>
</ol>
<pre><code class="language-csharp">hub = new HubConnection(new Uri(&quot;https://server/hub&quot;), new JsonProtocol(new JsonDotNetEncoder()));
</code></pre>

<p>The <code>JsonDotNetEncoder</code> and the <code>LitJsonEncoder</code> classes can be found in the <code>Best HTTP\Examples\SignalRCore\Encoders\</code> folder.</p>
<h2 id="messagepack">MessagePack</h2>
<p>By default the server has support for the JSon encoding but by <a href="https://docs.microsoft.com/en-us/aspnet/core/signalr/messagepackhubprotocol?view=aspnetcore-3.1">adding new packages and a few lines of code</a> the MessagePack encoding can be enabled too.</p>
<p>There's a MessagePack encoding implementation for the plugin, but it's disabled by default. To enable and use it, follow these steps:</p>
<ol>
<li>Download and import the <a href="https://assetstore.unity.com/packages/tools/network/json-messagepack-serialization-59918?aid=1101lfX8E">Json &amp; MessagePack Serialization</a> package</li>
<li>Create a new <a href="https://docs.unity3d.com/Manual/ScriptCompilationAssemblyDefinitionFiles.html">Asembly Definition file</a> under the <em>Plugins\GameDevWare.Serialization</em> folder</li>
<li>Locate the BestHTTP.asmdef file under the <em>Best HTTP</em> folder</li>
<li>
<p>Reference the newly create asmdef file and press Apply:</p>
<p><img alt="BestHTTP_AssemblyDefinition_MessagePack" src="../media/BestHTTP_AssemblyDefinition_MessagePack.png" /></p>
</li>
<li>
<p>Add the <strong>BESTHTTP_SIGNALR_CORE_ENABLE_GAMEDEVWARE_MESSAGEPACK</strong> define to the <a href="https://docs.unity3d.com/Manual/PlatformDependentCompilation.html">Scripting Define Symbols</a> input under <strong>PlayerSettings/Other Settings</strong>:</p>
<p><img alt="GameDevWare_MessagePack_ScriptingDefineSymbols.png" src="../media/GameDevWare_MessagePack_ScriptingDefineSymbols.png" /></p>
</li>
<li>
<p>Use the now available <code>MessagePackProtocol</code> class:</p>
</li>
</ol>
<pre><code class="language-csharp">hub = new HubConnection(new Uri(&quot;https://server/hub&quot;), new MessagePackProtocol());
</code></pre>

<p>As you can see, the <code>MessagePackProtocol</code> uses only one class there's no MessagePackEncoder as it's very specific and uses directly the <em>Json &amp; MessagePack Serialization</em> classes.</p>
<p>The <code>MessagePackProtocol</code> class can be found in the <code>Best HTTP\Examples\SignalRCore\Encoders\</code> folder.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../4.IRetryPolicy/" class="btn btn-neutral float-right" title="Automatic reconnection and the IRetryPolicy interface">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../2.Authentication/" class="btn btn-neutral" title="The IAuthenticationProvider interface"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../2.Authentication/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../4.IRetryPolicy/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>

</body>
</html>
